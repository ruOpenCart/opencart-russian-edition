<?xml version="1.0" encoding="utf-8"?>
    <modification>
    <name>[OCN] OpenCart 3 RE Tweak</name>
    <version>3.0.3.6.RE8</version>
    <author>Hkr</author>
    <link>https://forum.opencart.name</link>
    <code>ocn_30_re_tweak</code>
    <date>04.08.2020</date>

<!-- Замена ссылок в меню профиля в админке -->
    <file path="admin/view/template/common/header.twig">
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://www.opencart.com" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <li><a href="http://www.opencart.com" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }} [EN]</a></li>
                <li><a href="https://opencart.name" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }} [RU]</a></li>
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://docs.opencart.com" target="_blank"><i class="fa fa-file-text-o fa-fw"></i> {{ text_documentation }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <li><a href="https://docs.opencart.name/ru-ru/introduction/" target="_blank"><i class="fa fa-file-text-o fa-fw"></i> {{ text_documentation }} [RU]</a></li>
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://forum.opencart.com" target="_blank"><i class="fa fa-comments-o fa-fw"></i> {{ text_support }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
            <li><a href="https://forum.opencart.name" target="_blank"><i class="fa fa-comments-o fa-fw"></i> {{ text_support }} [RU]</a></li>
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- Добавление копирайтов в футер -->
    <!-- Разделение языковых фраз для удобства -->
    <file path="admin/language/en-gb/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_footer']  = '<a href="http://www.opencart.com">OpenCart</a> &copy; 2009-' . date('Y') . ' All Rights Reserved.';
            ]]></search>
            <add position="replace" trim="true" offset="2"><![CDATA[
                $_['text_footer']                      = 'OpenCart';
                $_['text_footer_link']                 = 'https://www.opencart.com';
                $_['text_footer_year']                 = '2009';
                $_['text_footer_copyright_icon']       = '&copy;';
                $_['text_footer_copyright']            = 'All Rights Reserved.';
                $_['text_version']                     = 'Version %s';
                $_['text_version_hidden']              = 'Version opencart';

                // RE
                $_['text_footer_re']                   = 'OpenCart Russian Edition';
                $_['text_footer_link_re']              = 'https://forum.opencart.name';
                $_['text_footer_year_re']              = '&copy; 2020-';
                $_['text_version_re']                  = 'Assembly version';
                $_['text_version_number_re']           = 'RE8';
                $_['text_version_hidden_re']           = 'OpenCart RE';
                $_['text_version_link_re']             = 'https://forum.opencart.name/resources/13/';
                $_['text_version_translate_link_re']   = 'https://forum.opencart.name/resources/9/';
                $_['text_version_translate_re']        = 'Translation version';
                $_['text_version_translate_number_re'] = '3.0.3.6.10';
            ]]></add>
        </operation>
    </file>
    <file path="admin/language/ru-ru/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_footer']  = '<a href="http://www.opencart.com">OpenCart</a> &copy; 2009-' . date('Y') . ' Все права защищены. <br> <a href="https://forum.opencart.name" target="_blank">OpenCart.name</a> &copy; 2020-' . date('Y') . ' Все права защищены.';
            ]]></search>
            <add position="replace" trim="true" offset="2"><![CDATA[
                $_['text_footer']                      = 'OpenCart';
                $_['text_footer_link']                 = 'https://www.opencart.com';
                $_['text_footer_year']                 = '2009';
                $_['text_footer_copyright_icon']       = '&copy;';
                $_['text_footer_copyright']            = 'Все права защищены.';
                $_['text_version']                     = 'Версия %s';
                $_['text_version_hidden']              = 'Версия opencart';

                // RE
                $_['text_footer_re']                   = 'OpenCart Russian Edition';
                $_['text_footer_link_re']              = 'https://forum.opencart.name';
                $_['text_footer_year_re']              = '2020';
                $_['text_version_re']                  = 'Версия сборки';
                $_['text_version_number_re']           = 'RE8';
                $_['text_version_hidden_re']           = 'Версия OpenCart RE';
                $_['text_version_link_re']             = 'https://forum.opencart.name/resources/13/';
                $_['text_version_translate_link_re']   = 'https://forum.opencart.name/resources/9/';
                $_['text_version_translate_re']        = 'Версия перевода';
                $_['text_version_translate_number_re'] = '3.0.3.6.10';
                $_['text_version_translate_hidden_re'] = 'от opencart.name';
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Добавление языковых фраз в контроллере -->
    <file path="admin/controller/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $data['text_version'] = sprintf($this->language->get('text_version'), VERSION);
            ]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_version_re'] = $this->language->get('text_version_re');
                $data['text_version_re'] .= ' ' . $this->language->get('text_version_number_re');
                $data['text_version_translate_re'] = $this->language->get('text_version_translate_re');
                $data['text_version_translate_re'] .= ' ' . $this->language->get('text_version_translate_number_re');
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                $data['text_version'] = '';
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                $data['text_version'] = $this->language->get('text_version_hidden');
                $data['text_version_re'] = $this->language->get('text_version_hidden_re');
                $data['text_version_translate_re'] = $this->language->get('text_version_translate_re');
                $data['text_version_translate_re'] .= ' ' . $this->language->get('text_version_translate_hidden_re');
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                return $this->load->view('common/footer', $data);
            ]]></search>
            <add position="before" trim="true"><![CDATA[
                $data['text_footer_link'] = $this->language->get('text_footer_link');
                $data['text_footer_year'] = $this->language->get('text_footer_year');
                $data['text_footer_copyright_icon'] = $this->language->get('text_footer_copyright_icon');
                $data['text_footer_copyright'] = $this->language->get('text_footer_copyright');

                // RE
                $data['text_footer_re'] = $this->language->get('text_footer_re');
                $data['text_footer_link_re'] = $this->language->get('text_footer_link_re');
                $data['text_footer_year_re'] = $this->language->get('text_footer_year_re');
                $data['text_version_link_re'] = $this->language->get('text_version_link_re');
                $data['text_version_translate_link_re'] = $this->language->get('text_version_translate_link_re');
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Изменение верстки шаблона для вывода ссылок на сайт проекта сборки -->
    <file path="admin/view/template/common/footer.twig">
        <operation>
            <search trim="true"><![CDATA[
                <footer id="footer">{{ text_footer }}<br />{{ text_version }}</footer></div>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <footer id="footer">
                    <a href="{{ text_footer_link }}" target="_blank">{{ text_footer }}</a>
                    {{ text_footer_copyright_icon }} {{ text_footer_year }}-{{ "now"|date("Y") }}
                    {{ text_footer_copyright }}<br>
                    <a href="{{ text_footer_link_re }}" target="_blank">{{ text_footer_re }}</a>
                    {{ text_footer_copyright_icon }} {{ text_footer_year_re }}-{{ "now"|date("Y") }}
                    {{ text_footer_copyright }}<br>
                    {{ text_version }} |
                    <a href="{{ text_version_link_re }}" target="_blank">{{ text_version_re }}</a> |
                    <a href="{{ text_version_translate_link_re }}" target="_blank">{{ text_version_translate_re }}</a>
                </footer></div>
            ]]></add>
        </operation>
    </file>
    <!--  -->
<!--  -->

<!-- Комментируем рекламу из всех страниц расширений -->
    <file path="admin/controller/extension/extension/{analytics,captcha,dashboard,feed,fraud,menu,module,payment,report,shipping,theme,total}.php">
        <operation>
            <search trim="true"><![CDATA[
                $data['promotion'] = $this->load->controller('extension/extension/promotion');
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                // $data['promotion'] = $this->load->controller('extension/extension/promotion');
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/extension/extension/{analytics,captcha,dashboard,feed,fraud,menu,module,payment,report,shipping,theme,total}.twig">
        <operation>
            <search trim="true"><![CDATA[
                {{ promotion }}
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                {# {{ promotion }} #}
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- По умолчанию тип Расширения Модули -->
    <file path="admin/controller/common/column_left.php">
        <operation>
            <search trim="true"><![CDATA[
                'href'     => $this->url->link('marketplace/extension', 'user_token=' . $this->session->data['user_token'], true),
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                'href'     => $this->url->link('marketplace/extension', 'user_token=' . $this->session->data['user_token'] . '&type=module', true),
            ]]></add>
        </operation>
    </file>
<!--  -->
</modification>
